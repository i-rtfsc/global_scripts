# Neovim 完全新手使用指南

**适合人群**：第一次使用 Vim/Neovim 的开发者

> 📚 本指南会从最基础的概念开始，一步步教你如何使用 Neovim

---

## 目录

1. [Vim 基础概念](#vim-基础概念)
2. [Neovim 的四种模式](#neovim-的四种模式)
3. [如何按快捷键](#如何按快捷键)
4. [基本操作速查表](#基本操作速查表)
5. [复制粘贴操作](#复制粘贴操作)
6. [我们配置的快捷键详解](#我们配置的快捷键详解)
7. [常见使用场景](#常见使用场景)
8. [常见问题与解决](#常见问题与解决)
9. [学习路线建议](#学习路线建议)
10. [实用技巧](#实用技巧)
11. [快捷键总结表](#快捷键总结表)

---

## Vim 基础概念

### 什么是模式？

**与其他编辑器最大的不同：Vim 是模式编辑器**

- **普通编辑器**（VSCode, Sublime）：打开就能直接输入文字
- **Vim/Neovim**：有不同的"模式"，每个模式下按键功能不同

这就像你的手机：
- 正常模式 = 浏览模式（可以滑动、点击）
- 编辑模式 = 输入法打开的状态（输入文字）

### 为什么要有模式？

因为这样可以让你：
- **不用鼠标**就能快速移动光标
- **不用方向键**就能编辑文本
- **效率极高**（熟练后）

---

## Neovim 的四种模式

### 1. 普通模式（Normal Mode）⭐ 默认模式

**进入方式**：启动 Nvim 时的默认模式，或在其他模式按 `Esc`

**用途**：
- 移动光标
- 删除/复制/粘贴
- 执行命令

**识别**：左下角什么都不显示

**常用操作**：
```
h, j, k, l    # 左、下、上、右移动光标
w             # 跳到下一个单词开头
b             # 跳到上一个单词开头
0             # 跳到行首
$             # 跳到行尾
gg            # 跳到文件开头
G             # 跳到文件末尾
dd            # 删除当前行
yy            # 复制当前行
p             # 粘贴
u             # 撤销
Ctrl + r      # 重做
```

### 2. 插入模式（Insert Mode）📝 输入文字

**进入方式**（从普通模式）：
- `i` - 在光标前插入
- `a` - 在光标后插入
- `o` - 在下方新建一行
- `O` - 在上方新建一行

**用途**：输入、编辑文字（就像普通编辑器）

**识别**：左下角显示 `-- INSERT --`

**退出**：按 `Esc` 回到普通模式

### 3. 可视模式（Visual Mode）🔦 选择文本

**进入方式**（从普通模式）：
- `v` - 字符选择
- `V` - 行选择
- `Ctrl + v` - 块选择

**用途**：选中文本后进行操作（删除、复制等）

**识别**：左下角显示 `-- VISUAL --`

**常用操作**：
```
选中后按 d   # 删除选中内容
选中后按 y   # 复制选中内容
选中后按 >   # 向右缩进
选中后按 <   # 向左缩进
```

### 4. 命令模式（Command Mode）⚙️ 执行命令

**进入方式**（从普通模式）：按 `:`

**用途**：执行各种命令

**识别**：底部出现 `:` 提示符

**常用命令**：
```
:w           # 保存文件
:q           # 退出
:wq          # 保存并退出
:q!          # 不保存强制退出
:e 文件名    # 打开文件
:help 主题   # 查看帮助
```

---

## 如何按快捷键

### 什么是 `<leader>` 键？

在我们的配置中，`<leader>` 键 = **空格键**

### 快捷键表示法说明

| 表示法 | 含义 | 实际按法 |
|--------|------|----------|
| `<leader>ff` | Leader键 + f + f | 空格 → f → f（连续按3个键）|
| `<C-n>` | Ctrl + n | 按住 Ctrl，再按 n |
| `<S-Tab>` | Shift + Tab | 按住 Shift，再按 Tab |
| `gd` | g + d | 按 g，再按 d（不需要同时按）|

### 按键顺序示例

#### 例子1：打开文件查找 `<leader>ff`

```
1. 确保在普通模式（按 Esc）
2. 按 空格键（Leader）
3. 松开
4. 按 f
5. 再按 f
→ 出现文件查找界面
```

#### 例子2：全局搜索 `<leader>fg`

```
1. 确保在普通模式（按 Esc）
2. 按 空格键
3. 按 f
4. 按 g
→ 出现全局搜索界面
```

#### 例子3：向下滚动文档 `<C-f>`

```
1. 按住 Ctrl 不放
2. 按 f
3. 同时松开
→ 向下翻页
```

---

## 基本操作速查表

### 启动和退出

```bash
# 启动
nvim              # 空白启动
nvim filename     # 打开文件
nvim .            # 打开当前目录

# 退出（在普通模式下）
:q                # 退出（未修改的情况）
:q!               # 强制退出，不保存
:wq               # 保存并退出
:x                # 保存并退出（简写）
ZZ                # 保存并退出（快捷键）
ZQ                # 不保存退出（快捷键）
```

### 保存文件

```
:w                # 保存当前文件
:w filename       # 另存为
:wa               # 保存所有打开的文件
```

### 移动光标（普通模式）

#### 基础移动
```
h         # 左移一个字符  ←
j         # 下移一行      ↓
k         # 上移一行      ↑
l         # 右移一个字符  →
```

💡 **记忆技巧**：
- `j` 看起来像向下的箭头 ↓
- `k` 与 `j` 相反，向上 ↑
- `h` 在左边，所以向左 ←
- `l` 在右边，所以向右 →

#### 单词移动
```
w         # 下一个单词开头
b         # 上一个单词开头
e         # 当前/下一个单词结尾
```

#### 行内移动
```
0         # 跳到行首（第一个字符）
^         # 跳到行首（第一个非空字符）
$         # 跳到行尾
```

#### 屏幕移动
```
H         # 跳到屏幕顶部
M         # 跳到屏幕中间
L         # 跳到屏幕底部
Ctrl + u  # 向上翻半页
Ctrl + d  # 向下翻半页
Ctrl + b  # 向上翻一页
Ctrl + f  # 向下翻一页
```

#### 文件移动
```
gg        # 跳到文件开头
G         # 跳到文件末尾
:123      # 跳到第 123 行
123gg     # 跳到第 123 行（另一种方式）
```

### 编辑操作

#### 进入插入模式
```
i         # 在光标前插入
a         # 在光标后插入
I         # 在行首插入
A         # 在行尾插入
o         # 在下方新建一行
O         # 在上方新建一行
```

#### 删除（普通模式）
```
x         # 删除光标下的字符
X         # 删除光标前的字符
dw        # 删除一个单词
dd        # 删除整行
D         # 删除到行尾
d$        # 删除到行尾（同 D）
d0        # 删除到行首
```

#### 复制和粘贴
```
yy        # 复制整行
yw        # 复制一个单词
y$        # 复制到行尾
p         # 在光标后粘贴
P         # 在光标前粘贴
```

#### 撤销和重做
```
u         # 撤销
Ctrl + r  # 重做
```

#### 查找和替换
```
/搜索词   # 向下搜索
?搜索词   # 向上搜索
n         # 下一个匹配
N         # 上一个匹配

# 替换（命令模式）
:s/old/new/       # 替换当前行第一个
:s/old/new/g      # 替换当前行所有
:%s/old/new/g     # 替换整个文件
:%s/old/new/gc    # 替换整个文件，每次确认
```

### 复制粘贴操作

#### 💡 系统剪贴板已启用

我们的配置已经启用系统剪贴板（`clipboard = "unnamedplus"`），所以：

**最简单的方法（推荐）：**
```
v          # 可视模式
jjj        # 选择3行
y          # 复制（自动复制到系统剪贴板）
           # 现在可以在任何应用 Cmd+V 粘贴
```

#### 📋 所有复制方法

| 方法 | 快捷键 | 说明 | 推荐度 |
|------|--------|------|--------|
| **普通复制** | `y` | 复制后自动到系统剪贴板 | ⭐⭐⭐⭐⭐ |
| **系统剪贴板** | `"+y` | 明确指定系统剪贴板 | ⭐⭐⭐ |
| **主选择（macOS）** | `"*y` | macOS 主选择剪贴板 | ⭐⭐ |

#### `"+y` 按键说明

如果需要使用 `"+y`，按键顺序：
```
第1步：Shift + '  →  "  (双引号)
第2步：Shift + =  →  +  (加号)
第3步：y          →  y
```

**示例操作：**
```
:checkhealth     # 打开窗口
v                # 可视模式
jjj              # 选择3行

方法1（推荐）：
y                # 直接按 y，复制完成

方法2（手动指定）：
"+y              # Shift+' → Shift+= → y
                 # 复制完成

:q               # 退出
Cmd + V          # 在其他应用粘贴
```

#### 快捷复制技巧

```
yy               # 复制当前行（不用进可视模式）
3yy              # 复制3行
y$               # 复制到行尾
yiw              # 复制当前单词
yf;              # 复制到下一个分号
```

#### 在弹出窗口中复制

当打开 `:Mason`, `:Lazy`, `:checkhealth` 等窗口时：

```
方法1：可视模式（推荐）
1. 按 v 进入可视模式
2. 用 hjkl 选择文本
3. 按 y 复制
4. Cmd + V 粘贴

方法2：使用鼠标（部分终端支持）
1. 按住 Option (Alt)
2. 鼠标拖动选择
3. Cmd + C 复制
```

#### 验证系统剪贴板

测试配置是否生效：
```
nvim test.txt    # 打开文件
i                # 插入模式
Hello World      # 输入内容
Esc              # 退出插入模式
yy               # 复制行
:q!              # 退出

# 在终端粘贴
Cmd + V          # 如果出现 "Hello World"，配置成功！
```

---

## 我们配置的快捷键详解

> 💡 **重要**：所有以 `<leader>` 开头的快捷键，`<leader>` = 空格键

### 📁 文件操作

#### `<leader>ff` - 查找文件（Find Files）
```
操作步骤：
1. 按 Esc（确保普通模式）
2. 按 空格
3. 按 f
4. 再按 f

结果：
- 出现文件列表
- 输入文件名进行搜索
- 用 ↑↓ 或 Ctrl+j/k 选择
- 按 Enter 打开文件
```

#### `<leader>fg` - 全局搜索（Find Grep）
```
操作步骤：
1. 按 Esc
2. 按 空格
3. 按 f
4. 按 g

结果：
- 出现搜索框
- 输入要搜索的内容
- 实时显示匹配结果
- Enter 跳转到选中的位置
```

#### `<leader>fr` - 最近文件（Find Recent）
```
空格 → f → r
显示最近打开的文件列表
```

#### `<leader>fb` - 切换缓冲区（Find Buffers）
```
空格 → f → b
显示所有打开的文件（缓冲区）
```

### 📂 文件浏览器

#### `<leader>ee` - 打开/关闭文件浏览器
```
空格 → e → e
左侧出现文件树
```

**文件树中的操作**：
```
Enter     # 打开文件/文件夹
a         # 新建文件
d         # 删除文件
r         # 重命名
x         # 剪切
c         # 复制
p         # 粘贴
R         # 刷新
?         # 显示帮助
```

#### `<leader>ef` - 在文件树中定位当前文件
```
空格 → e → f
文件树会自动展开并高亮当前文件
```

### 🔧 LSP（代码智能提示）

#### `gd` - 跳转到定义（Go to Definition）
```
操作步骤：
1. 光标移到函数/变量名上
2. 按 g
3. 按 d

结果：
跳转到定义位置
```

#### `gR` - 查看引用（Go to References）
```
操作：g → R（注意是大写 R，需要 Shift）
结果：显示所有使用该函数/变量的地方
```

#### `K` - 显示文档（Hover）
```
操作：
1. 光标移到函数名上
2. 按 K（大写）

结果：
弹出函数的文档说明
```

#### `<leader>ca` - 代码操作（Code Action）
```
空格 → c → a
显示可用的代码操作（如自动修复、导入等）
```

#### `<leader>rn` - 重命名（Rename）
```
空格 → r → n
智能重命名函数/变量（所有引用处同步修改）
```

#### `[d` 和 `]d` - 上/下一个诊断错误
```
[d    # 跳到上一个错误
]d    # 跳到下一个错误
```

#### `<leader>d` - 显示当前行错误详情
```
空格 → d
弹出详细错误信息
```

### 🌿 Git 操作

#### `]c` 和 `[c` - 下/上一个改动
```
]c    # 跳到下一个 git 改动
[c    # 跳到上一个 git 改动
```

#### `<leader>gs` - Stage 当前改动（Git Stage）
```
空格 → g → s
暂存当前的改动（相当于 git add）
```

#### `<leader>gp` - 预览改动（Git Preview）
```
空格 → g → p
弹出窗口显示改动的 diff
```

#### `<leader>gb` - 显示行的 git blame
```
空格 → g → b
显示这行代码是谁写的，什么时候写的
```

### 💡 自动补全

在**插入模式**下：

```
Ctrl + Space    # 手动触发补全
Ctrl + j        # 下一个补全项
Ctrl + k        # 上一个补全项
Tab             # 选择下一个补全项
Shift + Tab     # 选择上一个补全项
Enter           # 确认选择
Ctrl + e        # 取消补全
```

### 💬 快速注释

```
gcc             # 注释/取消注释当前行
gc + 移动命令   # 注释多行
```

**例子**：
```
gcc             # 注释当前行
gc3j            # 注释当前行及下面3行
gc$             # 注释到行尾
```

在可视模式（选中文本后）：
```
gc              # 注释/取消注释选中的内容
```

### 🔍 其他实用快捷键

#### 搜索相关
```
<leader>fc      # 搜索光标下的单词
<leader>fh      # 搜索帮助文档
<leader>fk      # 搜索快捷键
<leader>ft      # 搜索 TODO 注释
```

#### 窗口操作
```
Ctrl + h        # 跳到左边窗口
Ctrl + j        # 跳到下边窗口
Ctrl + k        # 跳到上边窗口
Ctrl + l        # 跳到右边窗口
```

---

## 常见使用场景

### 场景1：打开项目开始编码

```bash
# 1. 在项目目录启动
cd ~/my-project
nvim .

# 2. 看到启动页，按任意键进入

# 3. 打开文件浏览器
空格 → e → e

# 4. 或者直接搜索文件
空格 → f → f
# 输入文件名，Enter 打开
```

### 场景2：查找并编辑代码

```bash
# 1. 全局搜索某个函数
空格 → f → g
# 输入函数名

# 2. 选择结果，Enter 跳转

# 3. 查看函数定义
# 光标移到函数名上，按 gd

# 4. 开始编辑
# 按 i 进入插入模式
# 输入代码
# 按 Esc 退出插入模式

# 5. 保存
:w
```

### 场景3：代码重构

```bash
# 1. 光标移到要重命名的变量上

# 2. 智能重命名
空格 → r → n
# 输入新名字，Enter

# 3. 查看所有引用
g → R

# 4. 保存所有文件
:wa
```

### 场景4：查看 Git 改动

```bash
# 1. 跳到下一个改动
]c

# 2. 预览改动内容
空格 → g → p

# 3. 暂存这个改动
空格 → g → s

# 4. 查看谁改的
空格 → g → b
```

### 场景5：修复错误

```bash
# 1. 跳到下一个错误
]d

# 2. 查看错误详情
空格 → d

# 3. 查看可用的自动修复
空格 → c → a
# 选择修复方案，Enter

# 4. 保存
:w
```

---

## 常见问题与解决

### Q1: 我按了键但没反应？

**原因**：可能不在正确的模式

**解决**：
```
1. 先按 Esc（回到普通模式）
2. 再执行快捷键
```

### Q2: 我不小心进入了奇怪的模式，怎么办？

**解决**：
```
连按两次 Esc
或者按 Ctrl + c
```

### Q3: 我按了 `i` 后输入的字符变成了命令？

**原因**：输入法没切换到英文

**解决**：
```
1. 切换到英文输入法
2. Vim 快捷键必须在英文状态下使用
```

### Q4: 怎么退出 Vim？

```
方法1: :q
方法2: :wq（保存并退出）
方法3: :q!（强制退出不保存）
方法4: ZZ（保存并退出）
```

### Q5: 文件浏览器/查找窗口怎么关闭？

```
方法1: 按 Esc（回到编辑器）
方法2: 按 q（关闭当前窗口）
```

### Q6: 我想撤销刚才的操作？

```
普通模式下按 u（撤销）
如果撤销多了，按 Ctrl + r（重做）
```

### Q7: 补全窗口太大，挡住了代码？

```
按 Ctrl + e 取消补全
按 Enter 选择当前项
```

### Q8: LSP 功能不工作（没有补全、跳转等）？

**检查步骤**：
```
1. 查看 LSP 状态
:LspInfo

2. 如果服务器未安装，打开 Mason
:Mason
# 安装需要的 LSP 服务器

3. 重启 LSP
空格 → r → s
```

### Q9: 如何复制粘贴到系统剪贴板？

```
复制：在可视模式选中后，按 "+y
粘贴：普通模式下按 "+p

或者（我们的配置已启用系统剪贴板）：
yy（复制）和 p（粘贴）自动使用系统剪贴板
```

### Q10: 文件树显示的文件太多，怎么过滤？

```
在文件树中：
按 f 进入过滤模式
输入文件名模式
```

---

## 学习路线建议

### 第1天：基础操作
```
✓ 学会启动和退出
✓ 掌握 i（插入）和 Esc（退出插入）
✓ 学会保存（:w）
✓ 练习移动光标（h j k l）
```

### 第2-3天：编辑操作
```
✓ 学会删除（dd、dw）
✓ 学会复制粘贴（yy、p）
✓ 学会撤销（u）和重做（Ctrl+r）
✓ 学会搜索（/）
```

### 第4-5天：高级移动
```
✓ 掌握单词移动（w、b）
✓ 掌握行首行尾（0、$）
✓ 掌握文件首尾（gg、G）
```

### 第1周后：配置的快捷键
```
✓ 文件查找（<leader>ff）
✓ 全局搜索（<leader>fg）
✓ 文件浏览器（<leader>ee）
✓ LSP 功能（gd、K、<leader>ca）
```

### 第2周后：进阶技巧
```
✓ 可视模式批量编辑
✓ 宏录制（高级话题）
✓ 多窗口操作
✓ 自定义配置
```

---

## 实用技巧

### 技巧1：快速移动到函数定义

```
1. 全局搜索函数名：空格 → f → g
2. 或者光标移到调用处：g → d
```

### 技巧2：同时编辑多个位置

```
1. 用可视块选择（Ctrl + v）
2. 选中多行
3. 按 I 进入插入模式
4. 输入内容
5. 按 Esc，所有行同时插入
```

### 技巧3：快速跳转到特定行

```
:123        # 跳到第 123 行
123gg       # 同上
```

### 技巧4：分屏编辑

```
:split      # 水平分屏
:vsplit     # 垂直分屏
Ctrl + w + w  # 切换窗口
```

### 技巧5：重复上次操作

```
.           # 重复上次编辑操作
```

---

## 快捷键总结表

### 模式切换
| 按键 | 说明 |
|------|------|
| `Esc` | 回到普通模式 |
| `i` | 进入插入模式（光标前） |
| `a` | 进入插入模式（光标后） |
| `v` | 进入可视模式 |
| `:` | 进入命令模式 |

### 移动（普通模式）
| 按键 | 说明 |
|------|------|
| `h j k l` | 左 下 上 右 |
| `w` | 下一个单词 |
| `b` | 上一个单词 |
| `0` | 行首 |
| `$` | 行尾 |
| `gg` | 文件开头 |
| `G` | 文件结尾 |

### 编辑（普通模式）
| 按键 | 说明 |
|------|------|
| `dd` | 删除行 |
| `yy` | 复制行 |
| `p` | 粘贴 |
| `u` | 撤销 |
| `Ctrl+r` | 重做 |
| `gcc` | 注释/取消注释 |

### 文件操作
| 快捷键 | 说明 |
|--------|------|
| `<leader>ff` | 查找文件 |
| `<leader>fg` | 全局搜索 |
| `<leader>fb` | 切换缓冲区 |
| `<leader>ee` | 文件浏览器 |

### LSP
| 快捷键 | 说明 |
|--------|------|
| `gd` | 跳转定义 |
| `gR` | 查看引用 |
| `K` | 显示文档 |
| `<leader>ca` | 代码操作 |
| `<leader>rn` | 重命名 |
| `[d` / `]d` | 上/下个错误 |

### Git
| 快捷键 | 说明 |
|--------|------|
| `]c` / `[c` | 下/上个改动 |
| `<leader>gs` | Stage 改动 |
| `<leader>gp` | 预览改动 |
| `<leader>gb` | Git blame |

---

## 参考资源

### 官方文档
- Neovim 官方文档: https://neovim.io/doc/
- Neovim 用户手册: `:help user-manual`

### 在线教程
- Vim 冒险游戏: https://vim-adventures.com/
- Vim 交互式教程: `vimtutor`（在终端输入这个命令）

### 插件文档
- Telescope: `:help telescope`
- LSP: `:help lsp`
- Treesitter: `:help treesitter`

### 快速帮助（在 Nvim 中）
```
:help                    # 打开帮助
:help <topic>            # 查看特定主题
:help key-notation       # 查看按键表示法
:help motion.txt         # 查看移动命令
```

---

## 最后的话

学习 Vim/Neovim 一开始会觉得困难，但：

1. **不要急**：一次学一点，慢慢积累
2. **多练习**：每天用 Nvim 写代码，肌肉记忆很重要
3. **善用帮助**：`:help` 是你最好的朋友
4. **循序渐进**：先掌握基础，再学高级功能

**记住**：Vim 的学习曲线很陡，但一旦掌握，效率会大大提升！

祝你早日成为 Vim 高手！🚀

---

**有问题？**
- 查看配置文件：`~/.config/nvim/gs-runtime/lua/`
- 查看插件列表：打开 nvim，输入 `:Lazy`
- 查看 LSP 状态：`:LspInfo`
- 查看 Mason 状态：`:Mason`
